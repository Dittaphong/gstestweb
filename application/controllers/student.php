<?phpdefined('BASEPATH') OR exit('No direct script access allowed');class student extends CI_Controller {	function __construct()	{		parent::__construct();		session_start();	}	public function index() {		//Input		$input = $_SESSION['USERCODE'];		//Array (Result, View)		$studentID = $this->studentsmodel->StudentInfoByStudentCode($input);		$Transcript = $this->studentsmodel->studentTranscriptInfo($studentID[0]['STUDENTID']);		//echo "<pre>";		//		print_r($input);		//		print_r($studentID);		//		exit();		$_SESSION['STUDENTID']=$studentID[0]['STUDENTID'];		$_SESSION['LEVELID'] = $studentID[0]['LEVELID'];		//print_r($_SESSION['STUDENTID']);		// $Result1 = $this->studentsmodel->StudentInfo($_SESSION['STUDENTID']);		$Result2 = $this->studentsmodel->StudentInfoByID($_SESSION['STUDENTID']);		$StrQuery = array(			'Result' => array(				'StudentInfo' => $studentID,				'Transcript' => $Transcript,				'namepage' =>'Dashboard',			),			'View' => '/Student/Dashboard',		);		//Generate View		$this->loadpage($StrQuery);	}	public function LoadPage($StrQuery)	{		// View		$this->load->view('/Template/Header', $StrQuery);		$this->load->view($StrQuery['View']);		$this->load->view('/Template/Footer');	}	public function Login()	{		$this->load->view('/Student/Login');	}	public function AuthenStudent()	{		$input = array(			'userName' => $this->input->post('userName'),			'password' => MD5($this->input->post('password')),		);		$Authen = $this->Studentsmodel->AuthenStudent($input);		if(isset($Authen) || count($Authen)>0){			$_SESSION['STUDENTCODE'] = $Authen[0]['USERCODE'];			$_SESSION['GROUPTYPE'] = $Authen[0]['GROUPTYPE'];			redirect('Student/StudentProfile');			console.log($_SESSION['STUDENTCODE']);		}		else		{			redirect('Student');		}	}	public function StudentProfile()	{		//Input		$studentID = $this->Studentsmodel->GetStudentId($_SESSION['STUDENTCODE']);		$input = $studentID[0]['STUDENTID'];		//Array (Result, View)		$data['Result'] = $this->Studentsmodel->StudentInfo($input);		//$_SESSION['STUDENTID']=$data['Result'][0]['STUDENTID'];		$data['transcript'] = $this->Studentsmodel->studentTranscriptInfo($input);		print_r($data['transcript']);		$StrQuery = array(			'data' => $data,			'menuactive'=>1,			'View' => '/Student/Components/StudentProfile'		);		$_SESSION['LEVELID'] = $data['Result'][0]['LEVELID'];		//Generate View		$this->LoadPage($StrQuery);	}	public function adviser($param1='1'){		// แต่งตั้งอาจารย์ที่ปรึกษา		$param1 =$this->uri->segment(3);		// ถ้ากดปุ่ม submit ให้ส่งค่าจาก form หน้าที่ 1 ไปหน้าเอกสาร ที่ 2		// ให้ $param1 =2 และทำการ ดึงข้อมูลอาจารย์ที่ปรึกษาและนักศึกษามาแสดง		$Patition = $this->db->where('STUDENTID', $_SESSION['STUDENTID'])->get('doc_adviser')->num_rows();		if ($Patition!=0) {			//$param1 = 2;		}		if($param1 =='2'){			if(isset($_POST['appoint_advisor_btn'])){				$data['adviser'] =$this->studentsmodel->AdviserInfo($_POST['adviser']);				if(isset($_POST['sub_adviser1'])){					$data['sub_adviser1'] =$this->studentsmodel->AdviserInfo($_POST['sub_adviser1']);				}				if(isset($_POST['sub_adviser2'])){					$data['sub_adviser2'] =$this->studentsmodel->AdviserInfo($_POST['sub_adviser2']);				}			}//print_r($data['adviser']);		}		if($param1 =='5'){		  $appointAdInfo = $this->studentsmodel->Select('relate_appiont_adviser_officer',												array('STUDENTID'=>$_SESSION['STUDENTID']),"3","");			$data['adviser'] =$this->studentsmodel->AdviserInfo($appointAdInfo[0]['OFFICERID']);			if($appointAdInfo[1]['OFFICERID'] !=""){				$data['sub_adviser1'] =$this->studentsmodel->AdviserInfo($appointAdInfo[1]['OFFICERID']);			}			if($appointAdInfo[2]['OFFICERID'] !=""){				$data['sub_adviser2'] =$this->studentsmodel->AdviserInfo($appointAdInfo[2]['OFFICERID']);			}			//print_r($data['sub_adviser1']);			//die();		}		if($param1 =="3"){			//ถ้าทำการกดปุ่มจากหน้า 2 หน้าเอกสาร เพื่อนำค่าจาก form เอกสารมาทำการบันทึกลง			//ทำการ select appoint_adviser_is_thesis โดย check paper_type  แล้วเอา row ล่าสุด			//เพื่อเอามา generate APPOINT_AVISER_ID			$data1 = array(				'STUDENTID' => $_SESSION['STUDENTID'],				// 'ATTACHMENT_IS_THESIS1'	=> isset($_POST['attachfile1'])? $_POST['attachfile1'] : "-",				// 'ATTACHMENT_IS_THESIS2'	=> isset($_POST['attachfile2'])? $_POST['attachfile2'] : "-",				'APPOINT_AVISER_DATE'	=> date("Y-m-d"),				//'APPOINT_AVISER_IS_THESIS_TYPE' =>$_SESSION['LEVELID'] ==82 ? "AP-IS" : "AP-TS",			);			$this->studentsmodel->insert('doc_adviser',$data1);			$officer = array();			$officer[0] = $_POST['adviser_id'];			if(isset($_POST['adviser1_id'])){				$officer[1] = $_POST['adviser1_id'];			}			if(isset($_POST['adviser2_id'])){				$officer[2] = $_POST['adviser2_id'];			}//echo $_POST['segment4'];			$checkrow = $this->studentsmodel->select('relate_appiont_adviser_officer',											array('STUDENTID'=>$_SESSION['STUDENTID']),1,'STUDENTID');										//	exit();		if(count($checkrow)>0  && isset($_POST['segment4'])==1){			for ($i=0; $i <count($officer) ; $i++) {				if($officer[$i]!=""){					if($i==0){						$type = 1;					} else {						$type = 2;					}					$input = array(						'OFFICERID' => $officer[$i],						'ADVISERTYPE' => $type,						'STUDENTID' => $_SESSION['STUDENTID'], );						$this->db->insert('relate_appiont_adviser_officer',$input);					}				}				}				// echo "<pre>";				// print_r($officer);				// exit();				$appointAdInfo = $this->studentsmodel->Select('relate_appiont_adviser_officer',array('STUDENTID'=>$_SESSION['STUDENTID']),3,"");				$data['param1']=3;			}			// echo "<pre>";			// print_r($data);			$input = $_SESSION['USERCODE'];			//Array (Result, View)			$studentInfo = $this->studentsmodel->StudentInfoByStudentCode($input);				//$studentInfo = $this->studentsmodel->StudentInfoByStudentCode($_SESSION['STUDENTCODE']);			$data['param1']=$param1;			$data['officerList'] = $this->studentsmodel->officerList();			$data['adviserList'] = $this->studentsmodel->AdviserList($_SESSION['STUDENTID']);			$namepage= $_SESSION['LEVELID'] ==82 ? 'ขอแต่งตั้งอาจารย์ที่ปรึกษาค้นคว้าอิสระ' :'ขอแต่งตั้งอาจารย์ที่ปรึกษาวิทยานิพนธ์' ;			// echo "<pre>";			// print_r($appointAdInfo);			$programOfficer = $this->studentsmodel->getProgramOfficer($studentInfo[0]['PROGRAMID']);			//print_r($programOfficer);			$StrQuery = array(				'Result'=>array(					'studentInfo' =>$studentInfo ,					'data' => $data,					'programOfficer'=>$programOfficer,					'namepage'=>$namepage,					'appointAdInfo' => isset($appointAdInfo)? $appointAdInfo :array()				),				'View' => '/Student/Components/AppointAdviser',			);			$this->LoadPage($StrQuery);		}		public function ceqe($param1='1'){			$studentId = $_SESSION['STUDENTID'];			$param1 = $this->uri->segment(3);			if($param1 ==3){				$this->session->set_userdata('ceqe_status', $this->uri->segment(3));			}			if($param1 ==2 || $param1 ==3){				$data['studentInfo'] = $this->studentsmodel->StudentInfoByID($studentId);				$data['dateArr'] = $this->dateArray();				if(isset($_POST['printBth']) =="ปริ้น"){					$papertype ='CEQE';//"CE";f					//หา row สุดท้ายของง doc_exam_qece				//	$a = $this->studentsmodel->getLastRow('doc_exam',array('EXAM_TYPE' => $papertype), 'EXAM_ID' );				 //	$rowcount =  count($a)+1;					//$printyear = $_POST['printyear']-543;				//	$_POST['ADVISERID'] = 1;					//$examyear = trim($_POST['examyear'])-543;				//	$ceQeId = $papertype."-".$studentId."-".$rowcount;					$data = array(						// 'CE_QE_EXAM_ID' => $ceQeId,						// 'CE_QE_TYPE' =>$papertype,						'STUDENTID' => $studentId,						// 'ADVISERID' => $_POST['ADVISERID'],						// 'ATTACH1' => isset($_POST['attach1']) ? $_POST['attach1'] : "-",						// 'ATTACH2' => isset($_POST['attach2']) ? $_POST['attach2'] : "-",						// 'ATTACH3' => isset($_POST['attach3']) ? $_POST['attach3'] : "-",						// 'SEMESTER_EXAM' => $_POST['exam_semester'],						// 'ADCADYEAR_EXAM' => $_POST['exam_acadyear'],						// 'EXAM_DATE' =>$examyear."-".$_POST['printmonthhidden']."-".$_POST['examdate'],						//'EXAM_STATUS'=>2,						//'PRINT_DATE' => $printyear."-".date('m')."-".$_POST['printdate'],					);					$this->studentsmodel->insert('doc_exam_qece',$data);					$doc_status = $papertype=="CE" ? 2 : 3;					//insert เพื่อเก็บ ลำดับและชนิดของเอกสาร					// $this->studentsmodel->insert('document_index',					// array('doc_index_std_id'=>$_SESSION['STUDENTID'],'doc_index_doc_id'=>$ceQeId,					// 'doc_index_doc_status'=>$doc_status));					// update สถานะของ  procedure_study ใน table student_master					$this->studentsmodel->update('student_master',array('procedure_study'=>$doc_status,					'procedure_study_id'=>2),array('STUDENTID',$_SESSION['STUDENTID']));					$this->session->set_userdata('print_status', $this->uri->segment(4));					//ดึงข้อมูลการสอบ วัดคุณสมบัติของ user					$data['ce_qe_info'] =$this->studentsmodel->Select('doc_exam',															array('STUDENTID'=>$_SESSION['STUDENTID']),1,'EXAM_ID');					//$data['examdate'] = $this->dateFormat($data['ce_qe_info'][0]['EXAM_DATE']);					$param1=3;				}			}			if($param1 ==1 OR $param1 ==4){				//check ว่าเคยสอบหรือยัง				$condition = array('STUDENTID'=>$_SESSION['STUDENTID']);				//$table,$data,$limit,$index				$data['ce_qe_info'] =$this->studentsmodel->Select('doc_exam',$condition,'*','EXAM_ID');			}			$data['studentInfo'] = $this->studentsmodel->StudentInfoByID($_SESSION['STUDENTID']);			$data['param1']=$param1;			$data['transcriptInfo'] = $this->studentsmodel->studentTranscriptInfo($_SESSION['STUDENTID']);			//$data['is_thesis_propersal_exam'] =$this->studentsmodel->is_thesis_propersal_exam($_SESSION['STUDENTID']);			//$data['examcount'] =count($data['ce_qe_info']);			$namepage= $_SESSION['LEVELID'] <90 ? 'ขอสอบประมวลผลความรู้' : 'ขอสอบวัดคุณสมบัติ';			$data['papertype']= $_SESSION['LEVELID'] <90 ? 'IS' :'TS';			$StrQuery = array(				'Result'=>array(					'data' => $data,					'namepage'=>$namepage,				),				'View' => '/Student/Components/CeQeExam'			);			$this->LoadPage($StrQuery);		}		public function SendTopicThesisAndIS(){			$studentId = $_SESSION['STUDENTID'];			$param1 = $this->uri->segment(3);			if($param1 ==2){				if(isset($_POST['topicPropersal'])){					if($_POST['name_th'] =="" || $_POST['name_en']==""){						$data['name_th_err'] = $_POST['name_th'] =="" ? "กรุณากรอกห้วข้อภาษาไทย" : "";						$data['name_en_err'] = $_POST['name_en'] =="" ? "กรุณากรอกห้วข้อภาษาอังกฤษ" : "";						$data['name_th']  ="";						$data['name_en']  ="";						$this->session->set_userdata("dataArr", $data);						redirect("/student/SendTopicThesisAndIS/","refresh");					}					else{						$lastrow = $this->studentsmodel->getLastRow('thesis',array('STUDENTID'=>$studentId),'STUDENTID');						$thesiscode = count($lastrow)+1;						$dataArr = array('THESISCODE'=>$thesiscode,'STUDENTID'=>$studentId,'THESISNAME' =>$_POST['name_th'] ,						'THESISNAMEENG' =>$_POST['name_en'] );						$this->studentsmodel->insert('thesis',$dataArr);						$this->studentsmodel->insert('thesis_name',array('thesis_name_th'=>$_POST['name_th'],																						'thesis_name_en'=>$_POST['name_en'],'STUDENTID'=>$studentId));						$data['name_th'] =$_POST['name_th'];						$data['name_en'] =$_POST['name_en'];						$data['thesiscode'] = $thesiscode;						$data['adviserList'] = $this->studentsmodel->AdviserList($_SESSION['STUDENTID']);					}					$param1 =2;				}			}			if($param1==4){				$data['adviserList'] = $this->studentsmodel->AdviserList($_SESSION['STUDENTID']);				$data['thesis'] = $this->studentsmodel->getThesisInfo($_SESSION['STUDENTID']);			}			$data['namepage']=	$_SESSION['LEVELID'] ==82 ? 'ยื่นหัวข้อค้นค้วาอิสระ' :'ยื่นหัวข้อวิทยานิพนธ์';			$StrQuery = array(				'Result'=>array(					'namepage' =>$data['namepage'],					'data' =>$data,					'param1' => $param1,				),				'View' => '/Student/TermpaperConfirm'			);			$this->LoadPage($StrQuery);		}		public function ExamReqSubmit(){			$studentId = $_SESSION['STUDENTID'];			$StrQuery = array(				'Result' => array(									'Student' => $this->studentsmodel->StudentInfoByID($_SESSION['STUDENTID']),									'ThesisName' => $this->db->where('STUDENTID',$studentId)->get('thesis_name')->result_array(),									'Exam' => $this->db->where('STUDENTID',$studentId)->where('EXAM_RESULT =', 0)->get('doc_exam')->result_array(),),				'View' => '/Student/ExamReqSubmit'			);			$this->LoadPage($StrQuery);		}		public function SaveThesisName(){			$studentId = $_SESSION['STUDENTID'];			$thesis_name = $this->db->where('STUDENTID',$studentId)->get('thesis_name')->num_rows();			$input = array(			'STUDENTID' => $studentId,			'thesis_name_th' =>$_POST['name_th'],			'thesis_name_en' =>$_POST['name_en'],);			if ($thesis_name<1) {				$this->db->insert('thesis_name', $input);			} else {				$this->db->where('STUDENTID', $studentId)->update('thesis_name', $input);			}			redirect($this->agent->referrer(), 'refresh');		}		public function PetitionSave(){			$studentId = $_SESSION['STUDENTID'];			// $Petition = $this->db->where('STUDENTID',$studentId)			// 												->where('EXAM_TYPE',$_POST['examtype'])			// 												->where('EXAM_RESULT =', "0")			// 												->get('doc_exam')->num_rows();			if ($_POST['examtype']=="QECE") {				$input = array(			'STUDENTID' => $studentId,			'EXAM_TYPE' =>$_POST['examtype'],			);		} else {			$input = array(			'STUDENTID' => $studentId,			'EXAM_TYPE' =>$_POST['examtype'],			'thesis_name_id' =>$_POST['name_id'],);		}			$this->db->insert('doc_exam', $input);			redirect($this->agent->referrer(), 'refresh');		}		public function DefendPropersalThesisIS($param1='1'){			$data['confirm_insert_data'] =false;			$data['studentInfo'] = $this->studentsmodel->StudentInfoByID($_SESSION['STUDENTID']);			$data['show_exampaper'] = $this->uri->segment(4);			$namepage= $_SESSION['LEVELID'] ==82 ? 'ขอสอบเค้าโครงการค้นค้วาอิสระ' :'ขอสอบเค้าโครงวิทยานิพนธ์';			$data['examPropersalInfo'] = $this->studentsmodel->Proposal($_SESSION['STUDENTID']);			if($this->uri->segment(3) ==2 OR  $this->uri->segment(3) ==3){					//หาอาจารย์ที่ปรึกษาของนักศึกษา				$data['adviserID'] = $this->studentsmodel->AdviserList($_SESSION['STUDENTID']);				//print_r($data['adviserInfo']);				$data['officer'] = array();				$count=0;				foreach ($data['adviserID'] as $key => $value) {				 	$data['officer'][$count]= $this->studentsmodel->AdviserInfo($value['OFFICERID']);					$count++;				}				if($this->uri->segment(3) ==3){					if(isset($_POST['printBth']) =="ปริ้น"){						$data = array(							//'EXAM_ID' => 'D-IS-'.$_SESSION['STUDENTID'],							'STUDENTID' => $_SESSION['STUDENTID'],							'EXAM_TYPE' => 'PROP'						);						$this->studentsmodel->insert('doc_exam',$data);						$data['confirm_insert_data'] =true;					}				}			}			$StrQuery = array(				'Result' =>array(					'data' => $data,					'namepage'=> $namepage,					'param1' =>$param1,				),				'View' => '/Student/Components/DefendPropersalThesisIS'			);			$this->LoadPage($StrQuery);		}		public function DefendThesisIS($param1='1'){			$data['confirm_insert_data'] =false;			$data['studentInfo'] = $this->studentsmodel->StudentInfoByID($_SESSION['STUDENTID']);			$data['show_exampaper'] = $this->uri->segment(4);			$namepage= $_SESSION['LEVELID'] ==82 ? 'ขอสอบการค้นค้วาอิสระ' :'ขอสอบวิทยานิพนธ์';			$data['examPropersalInfo'] = $this->studentsmodel->Thesis($_SESSION['STUDENTID']);			if($this->uri->segment(3) ==2 OR  $this->uri->segment(3) ==3){					//หาอาจารย์ที่ปรึกษาของนักศึกษา				$data['adviserID'] = $this->studentsmodel->AdviserList($_SESSION['STUDENTID']);				//print_r($data['adviserInfo']);				$data['officer'] = array();				$count=0;				foreach ($data['adviserID'] as $key => $value) {				 	$data['officer'][$count]= $this->studentsmodel->AdviserInfo($value['OFFICERID']);					$count++;				}				if($this->uri->segment(3) ==3){					if(isset($_POST['printBth']) =="ปริ้น"){						$data = array(							//'EXAM_PROPOSAL_THESIS_IS_ID' => 'D-TS-'.$_SESSION['STUDENTID'],							'STUDENTID' => $_SESSION['STUDENTID'],							//'OFFICERID' => $_POST['ADVISER_ID']						);						$this->studentsmodel->insert('doc_exam',$data);						$data['confirm_insert_data'] =true;					}				}			}			$StrQuery = array(				'Result' =>array(					'data' => $data,					'param1'=> $param1,					'namepage'=> $_SESSION['LEVELID'] ==82 ? 'ขอสอบการค้นค้วาอิสระ' :'ขอสอบวิทยานิพนธ์',				),				'View' => '/Student/Components/DefendThesisIS'			);			$this->LoadPage($StrQuery);		}		public function search_thesis($param1='1'){			if(isset($_POST['submitBtn']) == "ค้นหา"){			//$stdID = $this->studentsmodel->getStudentID($_POST['stdcode']);				//print_r($_POST);			$arrayName = array(				'STUDENTID' =>$_SESSION['STUDENTID'],				'THESISCODE' =>$_POST['thesiscode'],				'THESISNAME' =>$_POST['thesisname'] ,				// 'FACULTYID' =>$_POST['facultyid'] ,				// 'DEPARTMENTID' =>$_POST['departmentid'] ,				// 'LEVELID' =>$_POST['levelid']			);			$data['thesisSearch'] = $this->studentsmodel->getThesisByLike($arrayName);		}		$data['facultyLists'] = $this->studentsmodel->facultyLists();		$data['departmentLists'] = $this->studentsmodel->departmentLists();		$data['level'] = $this->studentsmodel->levelIDLists();		//$this->studentsmodel->ResearchAll();		$StrQuery = array(			'Result' => $data,			'namepage' =>'ค้นหาวิทยานิพนธ์' ,			'View' => 'Template/SearchThesis'		);			$this->LoadPage($StrQuery);			//$load->view('/',$this->data);		}		public function search_research($param1='1'){			if(isset($_POST['submitBtn']) == "ค้นหา"){			$stdID = $this->studentsmodel->getStudentID($_POST['stdcode']);			//	print_r($stdID);			$arrayName = array(				'STUDENTID' =>isset($stdID[0]['STUDENTID']) ? $stdID[0]['STUDENTID'] : "",				//'RESEARCHCODE' =>$_POST['researchcode'] ,				'RESEARCHNAME' =>$_POST['researchname'] ,				// 'FACULTYID' =>$_POST['facultyid'] ,				// 'DEPARTMENTID' =>$_POST['departmentid'] ,				// 'LEVELID' =>$_POST['levelid']			);			$data['researchInfo'] = $this->studentsmodel->getResearchInfo($arrayName);		}		if(isset($_POST['addResearchBtn'])=="Submit"){			//print_r($_POST);			$config['upload_path']   = './uploads/';	    $config['allowed_types'] = 'gif|jpg|png';	    $config['max_size']      = 100;	    $config['max_width']     = 1024;	    $config['max_height']    = 768;	    $this->load->library('upload', $config);	    if ( ! $this->upload->do_upload('file')) {	      $error = array('error' => $this->upload->display_errors());	      //$this->load->view('upload_form', $error);	    }else {	      $data = array('upload_data' => $this->upload->data());	      $this->load->view('upload_success', $data);	    }		}		// print_r($data['researchInfo']);		// exit();		$data['facultyLists'] = $this->studentsmodel->facultyLists();		$data['departmentLists'] = $this->studentsmodel->departmentLists();		$data['level'] = $this->studentsmodel->levelIDLists();		//$this->studentsmodel->ResearchAll();		$StrQuery = array(			'Result' => $data,			'namepage' =>'ค้นหางานวิจัย' ,			'View' => 'Template/SearchResearch'		);		//Generate View		$this->loadpage($StrQuery);	}		public function research($param1='1'){			if(isset($_POST['addResearchBtn'])=="Submit"){			//print_r($_POST);			$config['upload_path']   = './uploads/';	    $config['allowed_types'] = 'gif|jpg|png';	    $config['max_size']      = 100;	    $config['max_width']     = 1024;	    $config['max_height']    = 768;	    $this->load->library('upload', $config);	    if ( ! $this->upload->do_upload('file')) {	      $error = array('error' => $this->upload->display_errors());	      //$this->load->view('upload_form', $error);	    }else {	      $data = array('upload_data' => $this->upload->data());	      $this->load->view('upload_success', $data);	    }		}			$StrQuery = array(				'Result' =>array(					'param1'=> $param1,					'namepage'=> 'ผลงานวิจัยนักศึกษา',				),				'View' => '/Student/Research'			);			$this->LoadPage($StrQuery);		}		public function Graduated($param1='1'){			$StrQuery = array(				'Result' =>array(					'param1'=>$param1,					'namepage'=>'ขอสำเร็จการศึกษา',				),				'View' => '/Student/Components/Graduated'			);			$this->LoadPage($StrQuery);			//$this->load->view('/Student/Completions',$data);		}		public function dateFormat($value){			$examdate = explode("-",$value);			$data['date']  = $examdate[2]=="00" ? "" : $examdate[2];			$thaimonth=			array("มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม",			"สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม");			$data['month'] = date($examdate[1])=="00" ?  "" : $thaimonth[date($examdate[1])-1] ;			$data['year'] = $examdate[0]=="0000" ? "" : $examdate[0]+543;			return $data;		}		public function dateArray(){			$tempDate="";			for($i=1; $i<=31;$i++){				if($i<10)				$tempDate .= "<option value='0".$i."'>".$i."</option>";				else				$tempDate .= "<option value='".$i."'>".$i."</option>";			}			$tempMonth=			array(["มกราคม","01"],["กุมภาพันธ์","02"],["มีนาคม","03"],["เมษายน","04"],["พฤษภาคม","05"],["มิถุนายน","06"],["กรกฎาคม","07"],			["สิงหาคม","08"],["กันยายน","09"],["ตุลาคม","10"],["พฤศจิกายน","11"],["ธันวาคม","12"]);			$data['arrDate']=$tempDate;			$data['arrMonth'] = $tempMonth;			return $data;		}		public function search_student(){			$data['studentInfo'] = $this->studentsmodel->studentall();			$this->load->view('/Template/HeaderNoLeftMenu', $data);			$this->load->view('/Student/SearchStudent');			$this->load->view('/Template/Footer');		}		public function studentResume(){			$stdid   = $this->uri->segment(3);			$stdcode = $this->uri->segment(4);			$stdid = 290100;			$stdcode=539070100101;			$data['stdInfo'] = $this->studentsmodel->studentInfo($stdcode);			$transcript = $this->studentsmodel->transcript($stdid);			foreach ($transcript as $key => $value) {				$arrayName = array(					'STUDENTID' => $stdid ,					'ACADYEAR'	=> $value['ACADYEAR'],					'SEMESTER'	=> $value['SEMESTER']				);				$transcript2[$value['ACADYEAR']][$value['SEMESTER']] = $this->studentsmodel->transcript2($arrayName);			}			//echo "<pre>";			//print_r($transcript);			$data['transcript'] = $transcript2;			// print_r($data['transcript']);			// die();			$this->load->view('/Template/HeaderNoLeftMenu');			$this->load->view('/Student/studentResume', $data);			$this->load->view('/Template/Footer');		}		public function student_thesis_is_info(){			$student_id = $this->uri->segment(3);			$data['student_info'] = $this->studentsmodel->studentinfo($student_id);			$data['std_ts_is_info'] = $this->studentsmodel->student_thesis_is_info($student_id);			//$this->load->view('/Template/HeaderNoLeftMenu', $data);			$this->load->view('/Student/student_thesis_is_info');			//$this->load->view('/Template/Footer');		}		public function thesisSearch(){			$thesisInfo = $this->studentsmodel->thesisSearch($naneEve);			//print_r($thesisInfo);			if(isset($_POST['submitBtn']) =="ค้นหา"){				$arrayName = array(					//'STUDENTCODE' => $_POST['thesiscode'],					'FACULTYID'=>260,					// 'THESISNAME' => $_POST['thesisname'],					// 'departmentid'=>$_POST['thesisdepartmentid'],					// 'LEVELID' =>$_POST['levelid'],				);				$data['stdInfo'] = $this->studentsmodel->getStudentID2($arrayName);			}			print_r($data['stdInfo']);			die();			// if($this->uri->segment(4) !=""){			// 	$this->studentResume();			// 	print(arg)			// }			//$this->studentResume();			$data['facultyLists'] = $this->studentsmodel->facultyLists();			$data['departmentLists'] = $this->studentsmodel->departmentLists();			$data['level'] = $this->studentsmodel->levelIDLists();			// $this->load->view('/Template/HeaderNoLeftMenu');			// $this->load->view('/Student/student_search', $data);			// $this->load->view('/Template/Footer');		}		public function teacher_info(){			$input =  $this->uri->segment(3);			$data['officer_info'] = $this->studentsmodel->AdviserInfo($input);			// $data['stds_in_adviser'] = $this->studentsmodel->thesis_adviser_list($input, 1, "T");			// $data['stds_in_subadviser'] = $this->studentsmodel->thesis_adviser_list($input, 2, "T");			// $data['stds_in_is_adviser'] = $this->studentsmodel->thesis_adviser_list($input, 1, "I");			// $data['stds_in_is_subadviser'] = $this->studentsmodel->thesis_adviser_list($input, 2, "I");			$data['namepage']='ข้อมูลอาจารย์';			$this->load->view('/Template/HeaderNoLeftMenu', $data);			$this->load->view('/Template/OfficerInfo');			$this->load->view('/Template/Footer');		}		public function dashboard(){			$this->Studentsmodel->StudentInfo($_SESSION['OFFICERCODE']);			$data['menuactive']='1';			$data['namepage']='Dashboard';			$this->load->view('/Student/Dashboard',$data);		}		public function profile(){			$data['menuactive']='1';			$data['namepage']='Profile';			$this->load->view('/Student/Profile',$data);		}		public function searchdisst(){			$data['menuactive']='5';			$data['namepage']='ค้นหาภาคนิพนธ์';			$this->load->view('/Student/Searchdisst',$data);		}		public function test(){			$stdid = $this->uri->segment(3);			$stdcode = $this->uri->segment(4);			$data = $this->studentsmodel->StudentInfo($stdcode);			//$data['menuactive']=$stdid;			//$data['param1']="dfdf";			//$data['namepage']='ค้นหางานงานวิจัย';			//$this->load->view('/Papers/Test',$data);			echo json_encode($data);		}	}?>